<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Skin Disease Prediction</title>

    <!-- Bootstrap CDN -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>

<body>

<!-- ================= HEADER ================= -->
<header class="fixed-top py-3 bg-white shadow-sm">
    <div class="container text-center">
        <h4 class="fw-bold mb-0">
            Skin Disease Prediction üß¨
        </h4>
    </div>
</header>

<!-- ================= PREDICTION SECTION ================= -->
<section class="check" id="check" style="margin-top:140px; min-height:100vh;">
    
    <h2 class="text-center text-primary mb-4">
        Upload Skin Image
    </h2>

    <!-- Upload Form -->
    <form action="/predict" method="POST" enctype="multipart/form-data">

        <div class="text-center">
            <input 
                type="file" 
                name="image" 
                id="real-file" 
                hidden
                required
                onchange="previewImage(event)"
            />

            <button 
                type="button" 
                class="btn btn-primary px-4 py-2"
                onclick="document.getElementById('real-file').click()"
            >
                Choose Skin Image
            </button>
        </div>

        <!-- Image Preview -->
        <div class="text-center mt-4">
            <img 
                id="preview"
                src=""
                class="img-fluid rounded shadow d-block mx-auto"
                style="max-width:300px; display:none;"
            />
        </div>

        <div class="text-center mt-4">
            <button 
                type="submit" 
                class="btn btn-success px-5 py-2"
            >
                Predict Disease
            </button>
        </div>
    </form>

    <!-- ================= RESULT ================= -->
    {% if prediction %}
    <div class="text-center mt-5">
        <hr>

        <h4 class="text-success">Prediction Result</h4>
        <p class="fs-5 fw-bold">{{ prediction }}</p>

        <img 
            src="{{ image_url }}" 
            alt="Uploaded Skin Image"
            class="img-fluid rounded shadow mt-3 d-block mx-auto"
            style="max-width:320px;"
        />

        <!-- Solutions -->
        {% if solutions %}
        <div class="card mt-4 mx-auto" style="max-width:600px;">
            <div class="card-body text-start">
                <h5 class="card-title text-primary">Recommended Precautions / Solutions</h5>
                <ul class="list-group list-group-flush">
                    {% for solution in solutions %}
                    <li class="list-group-item">‚úî {{ solution }}</li>
                    {% endfor %}
                </ul>
            </div>
        </div>
        {% endif %}

        <!-- Doctor Suggestion -->
        {% if doctor_en %}
        <div class="card mt-4 mx-auto border-danger" style="max-width:600px;">
            <div class="card-body text-start">
                <h5 class="card-title text-danger">üßë‚Äç‚öïÔ∏è Doctor‚Äôs Suggestion (English)</h5>
                <p>{{ doctor_en }}</p>

                <h5 class="card-title text-danger mt-3">ü©∫ ‡§°‡•â‡§ï‡•ç‡§ü‡§∞ ‡§ï‡•Ä ‡§∏‡§≤‡§æ‡§π (‡§π‡§ø‡§Ç‡§¶‡•Ä)</h5>
                <p>{{ doctor_hi }}</p>
            </div>
        </div>
        {% endif %}

        <!-- Medical Disclaimer -->
        <div class="alert alert-warning mt-4 mx-auto" style="max-width:600px;">
            ‚ö†Ô∏è <strong>Disclaimer:</strong>  
            This AI-based prediction is for educational purposes only.  
            Please consult a certified dermatologist for medical diagnosis.
        </div>

    </div>
    {% endif %}

</section>

<!-- ================= JS ================= -->
<script>
function previewImage(event) {
    const preview = document.getElementById("preview");
    preview.src = URL.createObjectURL(event.target.files[0]);
    preview.style.display = "block";
}
</script>

<script src="{{ url_for('static', filename='main.js') }}"></script>
</body>
</html>
